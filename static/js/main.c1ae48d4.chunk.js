(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(6),s=n.n(o),i=(n(15),n(9)),r=n(2),u=n.p+"static/media/logo.03b78ada.svg",l=n(0);var p=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("a",{href:"#",children:Object(l.jsx)("img",{className:"header__logo",src:u,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"})})})},d=n.p+"static/media/unknown-avatar.82a6ffa0.jpeg",j=Object(c.createContext)();var b=function(e){var t=e.card,n=e.onCardClick,a=e.onLikeClick,o=e.onDeleteClick,s=Object(c.useContext)(j),i=t.owner._id===s._id,r="card__delete-button button ".concat(i?"card__delete-button_visible":""),u=t.likes.some((function(e){return e._id===s._id})),p="card__like-button button ".concat(u?"card__like-button_active":"");return Object(l.jsxs)("li",{className:"card",children:[Object(l.jsx)("button",{type:"button",className:r,onClick:function(){return o(t)}}),Object(l.jsx)("img",{className:"card__img",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(l.jsxs)("div",{className:"card__items",children:[Object(l.jsx)("h2",{className:"card__capture",children:t.name}),Object(l.jsx)("button",{type:"button",className:p,onClick:function(){return a(t)}}),Object(l.jsx)("p",{className:"card__like-counter",children:t.likes.length})]})]})};var f=function(e){var t=e.onEditProfile,n=e.onAddPlace,a=e.onEditAvatar,o=e.onCardClick,s=e.cards,i=e.onCardLike,r=e.onCardDelete,u=Object(c.useContext)(j);return Object(l.jsxs)("main",{className:"main",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsx)("div",{className:"profile__img-wrapper",onClick:a,children:Object(l.jsx)("img",{className:"profile__avatar",src:u.avatar||d,alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsxs)("div",{className:"profile__main-info",children:[Object(l.jsx)("h1",{className:"profile__name",children:u.name}),Object(l.jsx)("button",{type:"button",className:"profile__edit-button button",onClick:t})]}),Object(l.jsx)("p",{className:"profile__description",children:u.about})]}),Object(l.jsx)("button",{type:"button",className:"profile__add-button button",onClick:n})]}),Object(l.jsx)("section",{className:"cards-section",children:Object(l.jsx)("ul",{className:"cards",children:s.map((function(e){return Object(l.jsx)(b,{card:e,onCardClick:o,onLikeClick:i,onDeleteClick:r},e._id)}))})})]})};var m=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa92021 Karpova Valentina"})})};var h=function(e){var t=e.card,n=e.onClose;return Object(l.jsx)("div",{className:"popup ".concat(t?"popup_opened":""),children:t&&Object(l.jsxs)("div",{className:"popup__gallery",children:[Object(l.jsx)("button",{type:"button",className:"popup__close",onClick:n}),Object(l.jsxs)("figure",{className:"popup__figure",children:[Object(l.jsx)("img",{className:"popup__img-gallery",src:t.link,alt:t.name}),Object(l.jsx)("figcaption",{className:"popup__figcaption",children:t.name})]})]})})},O=n(10),_=n(7),x=n(8),v=new(function(){function e(t){Object(_.a)(this,e),this._options=t}return Object(x.a)(e,[{key:"_fetch",value:function(e,t){return fetch(this._options.baseUrl+e,Object(O.a)({headers:this._options.headers},t)).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return this._fetch("/users/me")}},{key:"getInitialCards",value:function(){return this._fetch("/cards")}},{key:"updateUserInfo",value:function(e){return this._fetch("/users/me",{method:"PATCH",body:JSON.stringify(e)})}},{key:"addNewCard",value:function(e){return this._fetch("/cards",{method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return this._fetch("/cards/".concat(e),{method:"DELETE"})}},{key:"changeCardLikeStatus",value:function(e,t){return t?this.deleteLike(e):this.setLike(e)}},{key:"setLike",value:function(e){return this._fetch("/cards/likes/".concat(e),{method:"PUT"})}},{key:"deleteLike",value:function(e){return this._fetch("/cards/likes/".concat(e),{method:"DELETE"})}},{key:"changeAvatar",value:function(e){return this._fetch("/users/me/avatar",{method:"PATCH",body:JSON.stringify(e)})}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-28",headers:{authorization:"b1cd0dc5-2b23-4623-93d8-d89ffc3baa40","Content-Type":"application/json"}});var g=function(e){return Object(l.jsx)("div",{className:"popup ".concat(e.isOpen?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{type:"button",className:"popup__close",onClick:e.onClose}),Object(l.jsx)("h3",{className:"popup__title",children:e.title}),Object(l.jsxs)("form",{className:" popup__form",name:e.name,onSubmit:e.onSubmit,children:[e.children,Object(l.jsx)("button",{className:"popup__button button",type:"submit",children:e.submitText})]})]})})};function C(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=Object(c.useState)(""),s=Object(r.a)(o,2),i=s[0],u=s[1],p=Object(c.useState)(""),d=Object(r.a)(p,2),b=d[0],f=d[1],m=Object(c.useContext)(j);return Object(c.useEffect)((function(){u(m.name),f(m.about)}),[m]),Object(l.jsxs)(g,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:i,about:b})},children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{className:"popup__input",type:"text",name:"name",id:"popup-profile-title",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",value:i,required:!0,maxLength:"40",minLength:"2",onChange:function(e){return u(e.target.value)}}),Object(l.jsx)("span",{className:"popup__error-message popup-profile-title-error"})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{className:"popup__input",type:"text",name:"about",id:"popup-profile-description",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",value:b,required:!0,maxLength:"200",minLength:"2",onChange:function(e){return f(e.target.value)}}),Object(l.jsx)("span",{className:"popup__error-message popup-profile-description-error"})]})]})}function N(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,s=a.a.useRef(0),i=Object(c.useContext)(j);return Object(l.jsx)(g,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"changeAvatar",submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),o({avatar:s.current.value,name:i.name,about:i.about}),e.target.reset()},children:Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{className:"popup__input",type:"url",name:"avatar",id:"popup-change-avatar-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,ref:s}),Object(l.jsx)("span",{className:"popup__error-message popup-change-avatar-url-error"})]})})}function k(e){var t=e.isOpen,n=e.onClose,a=e.onAddNewCard,o=Object(c.useState)(""),s=Object(r.a)(o,2),i=s[0],u=s[1],p=Object(c.useState)(""),d=Object(r.a)(p,2),j=d[0],b=d[1];return Object(l.jsxs)(g,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"profileaddCard",submitText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:i,link:j}),u(""),b("")},children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{className:"popup__input",type:"text",name:"place",id:"popup-place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",required:!0,maxLength:"30",minLength:"2",value:i,onChange:function(e){return u(e.target.value)}}),Object(l.jsx)("span",{className:"popup__error-message popup-place-name-error"})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{className:"popup__input",type:"url",name:"url",id:"popup-place-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,value:j,onChange:function(e){return b(e.target.value)}}),Object(l.jsx)("span",{className:"popup__error-message popup-place-url-error"})]})]})}function y(e){var t=e.isOpen,n=e.onClose,c=e.onSubmit,a=e.card;return Object(l.jsx)(g,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirmation",submitText:"\u0414\u0430",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c(a)}})}var S=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),u=s[0],d=s[1],b=Object(c.useState)(!1),O=Object(r.a)(b,2),_=O[0],x=O[1],g=Object(c.useState)(!1),S=Object(r.a)(g,2),L=S[0],E=S[1],T=Object(c.useState)(void 0),A=Object(r.a)(T,2),U=A[0],P=A[1],D=Object(c.useState)(void 0),w=Object(r.a)(D,2),I=w[0],q=w[1],J=Object(c.useState)({}),F=Object(r.a)(J,2),B=F[0],H=F[1],z=Object(c.useState)([]),K=Object(r.a)(z,2),M=K[0],R=K[1];Object(c.useEffect)((function(){v.getUserInfo().then((function(e){H(e)})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){v.getInitialCards().then((function(e){R(e)})).catch((function(e){console.error(e)}))}),[]);var V=function(){a(!1),d(!1),x(!1),E(!1),P(void 0),q(void 0)};return Object(l.jsxs)(j.Provider,{value:B,children:[Object(l.jsx)(p,{}),Object(l.jsx)(f,{onAddPlace:function(){d(!u)},onEditAvatar:function(){x(!_)},onEditProfile:function(){a(!n)},onCardClick:function(e){P(e)},cards:M,onCardDelete:function(e){E(!L),q(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===B._id}));v.changeCardLikeStatus(e._id,t).then((function(t){R((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))}}),Object(l.jsx)(m,{}),Object(l.jsx)(h,{card:U,onClose:V}),Object(l.jsx)(C,{isOpen:n,onClose:V,onUpdateUser:function(e){v.updateUserInfo(e).then((function(e){H(e),V()})).catch((function(e){console.log(e)}))}}),Object(l.jsx)(k,{isOpen:u,onClose:V,onAddNewCard:function(e){v.addNewCard(e).then((function(e){R((function(t){return[e].concat(Object(i.a)(t))})),V()})).catch((function(e){console.log(e)}))}}),Object(l.jsx)(N,{isOpen:_,onClose:V,onUpdateAvatar:function(e){v.changeAvatar(e).then((function(e){H(e),V()})).catch((function(e){console.log(e)}))}}),Object(l.jsx)(y,{isOpen:L,onClose:V,onSubmit:function(e){v.deleteCard(e._id).then((function(){R((function(t){return t.filter((function(t){return t._id!==e._id}))})),V()})).catch((function(e){console.log(e)}))},card:I})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root")),L()}},[[17,1,2]]]);
//# sourceMappingURL=main.c1ae48d4.chunk.js.map